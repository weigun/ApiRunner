name: login stage
ref: login_stage
retry: "{{$max_retry}}"  #验证失败时，最多重试3次
env: 
  email: "{{gen_email}}"
  pwd: 111111
  max_retry: 0
  retcode: 0

notifications: 
  onSuccess: 
    - helloStage

  onFailure: 
    - sayFailed

  onStepSuccess: 
    - onStepSuccess

  onStepFailure: 
    - onStepFailure


steps: 
  - name: "login with {{$email}}"
    extends: testcase\pipe\step_login.yaml
    params: 
      email: "{{$email}}"
      password: "{{$pwd}}"
    export: 
      token: "{{.body.token}}"
    validate: 
        - op: eq
          actual: "{{.body.code}}"
          expected: "{{$retcode}}"















































































